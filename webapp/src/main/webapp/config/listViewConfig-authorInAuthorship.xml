<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- $This file is distributed under the terms of the license in /doc/license.txt$ -->

<!-- See guidelines at https://wiki.duraspace.org/x/eYXVAw -->

<list-view-config>
    <query-select>
        PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
        PREFIX core: &lt;http://vivoweb.org/ontology/core#&gt;
        PREFIX bibo: &lt;http://purl.org/ontology/bibo/&gt;
        PREFIX vitro: &lt;http://vitro.mannlib.cornell.edu/ns/vitro/0.7#&gt;
        PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
        PREFIX vcard:  &lt;http://www.w3.org/2006/vcard/ns#&gt;
        PREFIX obo: &lt;http://purl.obolibrary.org/obo/&gt;

        SELECT DISTINCT
            ?authorship
            ?infoResource ?infoResourceName
            (sample(?irsubclass) as ?subclass)
            (sample(?irdateTime) as ?dataTime)
            (sample(?irjournal) as ?journal)
            (sample(?irvolume) as ?volume)
            (sample(?irstartPage) as ?startPage)
            (sample(?irendPage) as ?endPage)
            (sample(?irdoi) as ?doi)
            (sample(?irpmid) as ?pmid)
            (sample(?irisbn10) as ?isbn10)
            (sample(?irisbn13) as ?isbn13)
            (sample(?irpublisher) as ?publisher)
            (sample(?irappearsIn) as ?appearsIn)
            (sample(?irpartOf) as ?partOf)
            (sample(?irlocale) as ?locale)
            (sample(?irhideThis) as ?hideThis)
            (group_concat(DISTINCT ?editor; separator='; ') as ?editors)
            (group_concat(DISTINCT ?editorName; separator = '; ') as ?editorNames)
            (group_concat(DISTINCT ?editorsubclass; separator='; ') as ?editorsubclasses)
        WHERE
        { {
            ?subject ?property ?authorship .
            ?authorship a core:Authorship .
            ?authorship core:relates ?infoResource .
            ?infoResource a obo:IAO_0000030 .
            ?infoResource rdfs:label ?infoResourceName .
            OPTIONAL { ?infoResource vitro:mostSpecificType ?irsubclass }
            OPTIONAL { ?infoResource bibo:volume ?irvolume }
            OPTIONAL { ?infoResource bibo:pageStart ?irstartPage }
            OPTIONAL { ?infoResource bibo:pageEnd ?irendPage }
            OPTIONAL { ?infoResource bibo:doi ?irdoi }
            OPTIONAL { ?infoResource bibo:pmid ?irpmid }
            OPTIONAL { ?infoResource bibo:isbn10 ?irisbn10 }
            OPTIONAL { ?infoResource bibo:isbn13 ?irisbn13 }
            OPTIONAL { ?infoResource core:placeOfPublication ?irlocale }
            OPTIONAL
            {
                ?infoResource bibo:reproducedIn ?appearsInObj .
                ?appearsInObj rdfs:label ?irappearsIn .
            }
            OPTIONAL
            {
                ?infoResource core:publisher ?publisherObj .
                ?publisherObj rdfs:label ?irpublisher .
            }
            OPTIONAL
            {
                ?infoResource obo:BFO_0000050 ?partOfObj .
                ?partOfObj rdfs:label ?irpartOf .
            }
            OPTIONAL
            {
                ?infoResource core:hasPublicationVenue ?publishedIn .
                ?publishedIn  rdfs:label ?irjournal .
            }
            OPTIONAL
            {
                ?infoResource core:dateTimeValue ?dateTimeValue .
                ?dateTimeValue core:dateTime ?irdateTime .
            }
            OPTIONAL {
              { ?infoResource ?property ?editorship .
                ?editorship a core:Editorship .
                ?editorship core:relates ?editor .
                ?editor a vcard:Kind .
                ?editor vcard:hasName ?vName .
                ?vName vcard:familyName ?lastName .
                OPTIONAL { ?vName vcard:givenName ?firstName . }
                OPTIONAL { ?vName core:middleName ?middleName . }
                bind ( COALESCE(?firstName, "") As ?firstName1) .
                bind ( COALESCE(?middleName, "") As ?middleName1) .
                bind ( COALESCE(?lastName, "") As ?lastName1) .
                bind (concat(str(?lastName1),IF(bound(?firstName), str(", " + ?firstName1),''),IF(bound(?middleName), str(" " + ?middleName1), '')) as ?editorName) .
              }
                UNION {
                  ?infoResource ?property ?editorship .
                  ?editorship a core:Editorship .
                  ?editorship core:relates ?editor .
                  ?editor a foaf:Agent .
                  ?editor rdfs:label ?editorName .
                  OPTIONAL {
                    ?editor vitro:mostSpecificType ?editorsubclass .
                    ?editorsubclass rdfs:subClassOf foaf:Agent .
                  }
                }
            }
            OPTIONAL { ?authorship core:hideFromDisplay ?irhideThis }
          }
        } GROUP BY ?authorship ?infoResource ?infoResourceName
        ORDER BY ?subclass  DESC(?dateTime) ?infoResourceName
    </query-select>

    <query-construct>
        PREFIX core: &lt;http://vivoweb.org/ontology/core#&gt;
        PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
        PREFIX bibo: &lt;http://purl.org/ontology/bibo/&gt;
        PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
        PREFIX vitro: &lt;http://vitro.mannlib.cornell.edu/ns/vitro/0.7#&gt;
        PREFIX vcard:  &lt;http://www.w3.org/2006/vcard/ns#&gt;
        PREFIX obo: &lt;http://purl.obolibrary.org/obo/&gt;

        CONSTRUCT
        {
            ?subject ?property ?authorship .
            ?authorship a core:Authorship .
            ?authorship core:hideFromDisplay ?hideThis .
            ?authorship core:relates ?infoResource .
            ?infoResource a obo:IAO_0000030 .
            ?infoResource vitro:mostSpecificType ?subclass .
            ?infoResource rdfs:label ?infoResourceName .
            ?infoResource bibo:volume ?volume .
            ?infoResource bibo:pageStart ?startPage .
            ?infoResource bibo:pageEnd ?endPage .
            ?infoResource bibo:doi ?doi .
            ?infoResource bibo:pmid ?pmid .
            ?infoResource bibo:isbn10 ?isbn10 .
            ?infoResource bibo:isbn13 ?isbn13 .
            ?infoResource core:placeOfPublication ?locale .
            ?infoResource bibo:reproducedIn ?appearsInObj .
            ?appearsInObj rdfs:label ?appearsIn .

            ?infoResource core:publisher ?publisherObj .
            ?publisherObj rdfs:label ?publisher .

            ?infoResource core:hasPublicationVenue ?publishedIn .
            ?publishedIn  rdfs:label ?journal .

            ?infoResource core:dateTimeValue ?dateTimeValue .
            ?dateTimeValue core:dateTime ?dateTime .

            ?infoResource obo:BFO_0000050 ?partOfObj .
            ?partOfObj rdfs:label ?partOf .

        }
        WHERE
        {
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:hideFromDisplay ?hideThis .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource vitro:mostSpecificType ?subclass .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource rdfs:label ?infoResourceName
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:volume ?volume .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:pageStart ?startPage .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:pageEnd ?endPage .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:doi ?doi .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:pmid ?pmid .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:isbn10 ?isbn10 .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:isbn13 ?isbn13 .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:placeOfPublication ?locale .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource bibo:reproducedIn ?appearsInObj .
                ?appearsInObj rdfs:label ?appearsIn .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:publisher ?publisherObj .
                ?publisherObj rdfs:label ?publisher .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:dateTimeValue ?dateTimeValue .
                ?dateTimeValue core:dateTime ?dateTime .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:hasPublicationVenue ?publishedIn .
                ?publishedIn  rdfs:label ?journal .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource obo:BFO_0000050 ?partOfObj .
                ?partOfObj rdfs:label ?partOf .
            }

        }
    </query-construct>

    <query-construct>
        PREFIX core: &lt;http://vivoweb.org/ontology/core#&gt;
        PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
        PREFIX bibo: &lt;http://purl.org/ontology/bibo/&gt;
        PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
        PREFIX vitro: &lt;http://vitro.mannlib.cornell.edu/ns/vitro/0.7#&gt;
        PREFIX vcard:  &lt;http://www.w3.org/2006/vcard/ns#&gt;
        PREFIX obo: &lt;http://purl.obolibrary.org/obo/&gt;

        CONSTRUCT
        {
            ?subject ?property ?authorship .
            ?authorship a core:Authorship .
            ?authorship core:relates ?infoResource .
            ?infoResource a obo:IAO_0000030 .

            ?infoResource core:relatedBy ?editorship .
            ?editorship a core:Editorship .
            ?editorship core:relates ?editorObj .
            ?editorObj a foaf:Agent .
            ?editorObj rdfs:label ?editorName .
            ?editorObj vitro:mostSpecificType ?editorAgentMST .
            ?editorAgentMST rdfs:subClassOf foaf:Agent .

            ?editorship core:relates ?editorVCard .
            ?editorVCard a vcard:Kind .
            ?editorVCard vitro:mostSpecificType ?editorVCardMST .
            ?editorVCardMST rdfs:subClassOf vcard:Kind .

            ?editorVCard vcard:hasName ?vName .
            ?vName ?vNameProperty ?vNameValue .
        }
        WHERE
        {
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:relatedBy ?editorship .
                ?editorship a core:Editorship .
                ?editorship core:relates ?editorObj .
                ?editorObj a foaf:Agent .
                ?editorObj vitro:mostSpecificType ?editorAgentMST .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:relatedBy ?editorship .
                ?editorship a core:Editorship .
                ?editorship core:relates ?editorObj .
                ?editorObj a foaf:Agent .
                ?editorObj rdfs:label ?editorName
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:relatedBy ?editorship .
                ?editorship a core:Editorship .
                ?editorship core:relates ?editorVCard .
                ?editorVCard a vcard:Kind .
                ?editorVCard vitro:mostSpecificType ?editorVCardMST .
            }
            UNION
            {
                ?subject ?property ?authorship .
                ?authorship a core:Authorship .
                ?authorship core:relates ?infoResource .
                ?infoResource a obo:IAO_0000030 .
                ?infoResource core:relatedBy ?editorship .
                ?editorship a core:Editorship .
                ?editorship core:relates ?editorVCard .
                ?editorVCard a vcard:Kind .
                ?editorVCard vcard:hasName ?vName .
                ?vName ?vNameProperty ?vNameValue .
            }

        }
    </query-construct>

    <template>propStatement-authorInAuthorship.ftl</template>
</list-view-config>
